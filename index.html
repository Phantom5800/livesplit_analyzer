<html>
    <head>
        <title>Livesplit Analyzer</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script src="js/main.js"></script>
        <link rel="stylesheet" href="styles/main.css">
    </head>
    <body ondrop="analyzeSplits(event)" ondragover="preventDefaultDrag(event)">
        <div id="content">
            <h1 id="game">Game Title</h1>
            <h2 id="category">Category</h2>
    
            <div class="flex_container">
                <div class="flex_child">
                    <h3>Overall Stats</h3>
                    <table id="stats">
                        <tr>
                            <td class="header">PB Time</td>
                            <td id="pb_time"></td>
                        </tr>
                        <tr>
                            <td class="header">PB Date</td>
                            <td id="pb_date"></td>
                        </tr>
                        <tr>
                            <td class="header">Days Since PB</td>
                            <td id="pb_offset"></td>
                        </tr>
                        <tr>
                            <td class="header">Average Time</td>
                            <td id="average_time"></td>
                        </tr>
                        <tr>
                            <td class="header">Best Time</td>
                            <td id="best_time"></td>
                        </tr>
                        <tr>
                            <td class="header">Latest Time</td>
                            <td id="last_finished_time"></td>
                        </tr>
                        <tr>
                            <td class="header">Days Since Finished Run</td>
                            <td id="finished_run_days"></td>
                        </tr>
                        <tr>
                            <td class="header">Total Play Time</td>
                            <td id="total_time"></td>
                        </tr>
                        <tr>
                            <td class="header">Runs Completed</td>
                            <td id="completed"></td>
                        </tr>
                        <tr>
                            <td class="header">Runs Attempted</td>
                            <td id="attempts"></td>
                        </tr>
                        <tr>
                            <td class="header">Possible Timesave</td>
                            <td id="timesave"></td>
                        </tr>
                    </table>
                </div>
    
                <div class="flex_child">
                    <h3>Settings</h3>
                    <table>
                        <tr>
                            <td class="header">Timing Mode</td>
                            <td>
                                <select id="timing_mode" onchange="onTimingModeChange(this.value)">
                                    <option>RealTime</option>
                                    <option>GameTime</option>
                                </select>
                            </td>
                            <td>Time comparison to display in the generated table.</td>
                        </tr>
                        <tr>
                            <td class="header">Small Gap Time (ms)</td>
                            <td><input id="small_gap_time" type="number" value="5000" onchange="onGapValueUpdate(0, this.value)"></td>
                            <td class="small_gap">Displayed like this</td>
                        </tr>
                        <tr>
                            <td class="header">Medium Gap Time (ms)</td>
                            <td><input id="medium_gap_time" type="number" value="10000" onchange="onGapValueUpdate(1, this.value)"></td>
                            <td class="medium_gap">Displayed like this</td>
                        </tr>
                        <tr>
                            <td class="header">Large Gap Time (ms)</td>
                            <td><input id="large_gap_time" type="number" value="20000" onchange="onGapValueUpdate(2, this.value)"></td>
                            <td class="large_gap">Displayed like this</td>
                        </tr>
                        <tr>
                            <td class="header">Visible Columns</td>
                            <td style="text-align: left;">
                                <input id="col-visibility-1" type="checkbox" onchange="toggleColumn(1, this)" checked>Section</input><br/>
                                <input id="col-visibility-2" type="checkbox" onchange="toggleColumn(2, this)" checked>Split Name</input><br/>
                                <input id="col-visibility-3" type="checkbox" onchange="toggleColumn(3, this)" checked>PB Split Time</input><br/>
                                <input id="col-visibility-4" type="checkbox" onchange="toggleColumn(4, this)" checked>PB Segment Time</input><br/>
                                <input id="col-visibility-5" type="checkbox" onchange="toggleColumn(5, this)" checked>Avg Segment Time</input><br/>
                            </td>
                            <td style="text-align: left;">
                                <input id="col-visibility-6" type="checkbox" onchange="toggleColumn(6, this)" checked>Best Segment Time</input><br/>
                                <input id="col-visibility-7" type="checkbox" onchange="toggleColumn(7, this)" checked>Best Segment Date</input><br/>
                                <input id="col-visibility-8" type="checkbox" onchange="toggleColumn(8, this)" checked>Resets During This Split</input><br/>
                                <input id="col-visibility-9" type="checkbox" onchange="toggleColumn(9, this)" checked>Resets Before Finishing Split</input>
                            </td>
                        </tr>
                        <tr>
                            <td class="header">Subsecond Accuracy</td>
                            <td style="text-align: left;">
                                <select id="msAccuracy" onchange="onMsAccuracyChange(this.selectedIndex)">
                                    <option>None</option>
                                    <option>Tenths</option>
                                    <option>Hundredths</option>
                                    <option>Thousandths</option>
                                </select>
                            </td>
                            <td>How many digits to display for fractional seconds.</td>
                        </tr>
                        <tr>
                            <td class="header">Percentage Accuracy</td>
                            <td>
                                <select id="percentAccuracy" onchange="onPercentAccuracyChange(this.selectedIndex)">
                                    <option>None</option>
                                    <option>Tenths</option>
                                    <option>Hundredths</option>
                                    <option>Thousandths</option>
                                </select>
                            </td>
                            <td>How many digits of accuracy to display for percentages.</td>
                        </tr>
                        <tr>
                            <td class="header">Remove Outliers from Average</td>
                            <td style="text-align: right;">
                                <input id="outliers" type="checkbox" onchange="onRemoveOutliersChange(this.checked)">
                            </td>
                            <td>Removes split times from averages that are significantly larger.</td>
                        </tr>
                    </table>
                    <ul class="info">
                        <li>
                            Make sure to adjust settings before dropping in a splits file.
                        </li>
                    </ul>
                </div>
            </div>
    
            <div style="padding-top: 1em;"></div>
    
            <div>           
                <table id="splits_table">
                    <tr id="splits_header" class="header">
                        <td style="width: 2em;">
                            <input id="allSplitsSelected" type="checkbox" onchange="selectAllToggle(this.checked)">
                        </td>
                        <td class="col-1">Section</td>
                        <td class="col-2">Split Name</td>
                        <td class="col-3">PB Split Time</td>
                        <td class="col-4">PB Segment Time</td>
                        <td class="col-5">Average Segment Time</td>
                        <td class="col-6">Best Segment Time</td>
                        <td class="col-7">Best Segment Time Date</td>
                        <td class="col-8">Resets During This Split</td>
                        <td class="col-9">Resets Before Finishing This Split</td>
                    </tr>
                </table>
            </body>
            </div>
    
            <div class="info" style="padding-top: 1em; padding-bottom: 1em;">
                <ul>
                    <li>
                        Average times are calculated as a mean average of all available times for a split.
                    </li>
                    <li>
                        Best Segment Time Date being undefined likely means that the a best segment time was deleted in livesplit and a new one has not been set since.
                    </li>
                    <li>
                        Attempt count may appear differently than in Livesplit if you have ever cleared your split history, or for other mysterious reasons still unknown.
                    </li>
                    <li>
                        In cases where a split was skipped, and a reset happened in the next split, the reset will be attributed to the split that was skipped. There's really no way to know in that case.
                    </li>
                    <li>
                        Source code for this page can be found at: <a href="https://github.com/Phantom5800/livesplit_analyzer" target="_blank">https://github.com/Phantom5800/livesplit_analyzer</a>
                    </li>
                </ul>
            </div>
            <div id="file_upload">
                Drag and drop your splits onto the page
            </div>
            <footer style="padding-top: 1em; text-align: right;">
                Speedrun LiveSplit Analyzer &copy; Phantom Games LLC. 2021
            </footer>
        </div>
    </body>
</html>